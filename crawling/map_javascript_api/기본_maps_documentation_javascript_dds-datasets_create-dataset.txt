Tab: 기본
Source URL: https://developers.google.com/maps/documentation/javascript/dds-datasets/create-dataset?hl=ko

이 페이지는 Cloud Translation API [https://cloud.google.com/translate/?hl=ko]를 통해 번역되었습니다.
홈 [https://developers.google.com/?hl=ko]
제품 [https://developers.google.com/products?hl=ko]
Google Maps Platform [https://developers.google.com/maps?hl=ko]
문서 [https://developers.google.com/maps/documentation?hl=ko]
Web [https://developers.google.com/maps/web?hl=ko]
Maps JavaScript API [https://developers.google.com/maps/documentation/javascript?hl=ko]
의견 보내기
데이터 세트 만들기 및 관리하기
플랫폼 선택: Android [https://developers.google.com/maps/documentation/android-sdk/dds-datasets/create-dataset?hl=ko] iOS [https://developers.google.com/maps/documentation/ios-sdk/dds-datasets/create-dataset?hl=ko] JavaScript [https://developers.google.com/maps/documentation/javascript/dds-datasets/create-dataset?hl=ko]
데이터 세트를 사용하면 로컬 파일이나 Google Cloud Storage의 지리 정보 데이터를 Google Maps Platform으로 업로드할 수 있습니다. 그런 다음 Cloud 콘솔에서 하나 이상의 지도 스타일과 데이터 세트를 연결할 수 있습니다. 데이터 세트를 지도 스타일과 연결한 후 데이터 기반 스타일 지정 API를 사용하여 지도 애플리케이션의 스타일을 동적으로 지정합니다.
REST API를 사용하여 지리 정보 데이터를 데이터 세트에 업로드할 수도 있습니다. 자세한 내용은 Maps Datasets API [https://developers.google.com/maps/documentation/datasets?hl=ko]를 참고하세요.
역할 구성
Google Cloud 프로젝트에서 데이터 세트를 만들고 관리하려면 프로젝트에 대한 소유자 또는 편집자 IAM 역할 [https://cloud.google.com/iam/docs/understanding-roles?hl=ko#role_types]이 있어야 합니다.
참고: 프로젝트를 만든 사람은 프로젝트에 대한 소유자 역할을 갖게 됩니다. Google Cloud 콘솔의 IAM 페이지 [https://console.cloud.google.com/iam-admin/iam?hl=ko]에 프로젝트 소유자 및 편집자가 표시됩니다.
데이터 세트를 관리하는 데 사용하는 사용자 계정 또는 서비스 계정에 다음 IAM 역할을 할당할 수도 있습니다.
Maps Platform Datasets Admin 역할은 사용자 계정 또는 서비스 계정에 프로젝트의 데이터 세트를 읽고 쓸 수 있는 권한을 부여합니다. 이 역할을 가진 사용자는 데이터 세트에 대한 모든 작업을 처리할 수 있습니다.
Maps Platform Datasets Viewer 역할은 프로젝트의 데이터 세트를 읽기 전용으로 볼 수 있는 권한을 부여합니다. 이 역할이 있으면 데이터 세트를 나열하거나 가져오거나 다운로드할 수 있습니다.
자세한 내용은 Google Cloud 콘솔을 사용하여 IAM 역할 부여하기 [https://cloud.google.com/iam/docs/grant-role-console?hl=ko]를 참고하세요.
데이터 세트의 데이터 소스
데이터 세트를 만들고 나면 Google Cloud Storage [https://cloud.google.com/storage/docs?hl=ko] 또는 로컬 파일의 데이터 세트에 데이터를 업로드합니다.
Cloud Storage의 데이터를 업로드할 때는 Cloud Storage의 데이터가 포함된 리소스의 파일 경로를 지정합니다. 이 경로는 gs://GCS_BUCKET/FILE 형식입니다.
요청하는 사용자는 스토리지 객체 뷰어 [https://cloud.google.com/storage/docs/access-control/iam-roles?hl=ko] 역할 또는 storage.objects.get 권한이 포함된 다른 역할이 필요합니다. Cloud Storage 액세스 관리에 관한 자세한 내용은 액세스 제어 개요 [https://cloud.google.com/storage/docs/access-control?hl=ko]를 참고하세요.
로컬 파일의 데이터를 업로드할 때는 업로드할 데이터가 포함된 GeoJSON, KML 또는 CSV 파일의 경로를 지정합니다.
사전 준비 사항
데이터 세트를 만들 때는 다음 조건을 충족해야 합니다.
표시 이름은 Google Cloud 프로젝트 내에서 고유해야 합니다.
표시 이름은 64바이트 미만이어야 합니다. 이러한 문자는 UTF-8로 표시되므로 일부 언어에서는 각 문자가 여러 바이트로 표시될 수 있습니다.
설명은 1,000바이트 미만이어야 합니다.
데이터를 업로드할 때는 다음 사항에 유의하세요.
지원되는 파일 형식은 CSV, GeoJSON, KML입니다.
지원되는 최대 파일 크기는 500MB입니다.
속성 열 이름은 '?_' 문자열로 시작할 수 없습니다.
3차원 도형은 지원되지 않습니다. WKT 형식의 'Z' 서픽스와 GeoJSON 형식의 고도 좌표가 여기에 포함됩니다.
참고: 데이터 파일의 크기에 따라 업로드를 완료하는 데 몇 분 또는 몇 시간이 걸릴 수 있습니다. 업로드에 오류가 있으면 오류 메시지가 표시됩니다. 업로드 작업에서 응답이 반환될 때까지 데이터 세트를 삭제하려고 하지 마세요.
참고: Maps Datasets API를 사용하여 업로드된 데이터로 만든 지도 타일은 낮은 확대/축소 수준에서 밀집되거나 복잡한 데이터를 삭제하거나 단순화할 수 있습니다. 예를 들어 사용자가 주 또는 국가로 축소하면 (예: 확대/축소 수준 5~12) 타일된 데이터가 도시 또는 지역으로 확대할 때와 다르게 보일 수 있습니다 (예: 확대/축소 수준 13~18). 이는 지도 렌더러와 함께 타일을 사용하여 타일을 슬림하고 성능이 우수하게 유지하기 위한 것입니다.
도움말: 데이터 파일이 크고 스타일 지정에 필요하지 않은 속성이 많이 포함되어 있는 상태에서 렌더링 성능을 최적화하려는 경우, 파일을 수정하여 불필요한 속성을 삭제합니다. 속성 수를 줄이면 지도 타일의 크기가 줄어 렌더링 성능이 개선됩니다.
데이터 준비 권장사항
밀집된 포인트, 긴 선분 또는 다각형과 같이 소스 데이터가 복잡하거나 크기가 큰 경우(50MB를 초과하는 소스 파일 크기가 이 카테고리에 해당하는 경우가 많음) 시각적 지도에서 최상의 성능을 얻으려면 업로드하기 전에 데이터를 단순화하는 것이 좋습니다.
다음은 데이터를 준비하기 위한 몇 가지 권장사항입니다.
지형지물 속성 최소화 'id' 및 '카테고리'와 같이 지도 스타일 설정에 필요한 지형지물 속성만 유지합니다. 고유 식별자 키에 데이터 기반 스타일을 사용하여 클라이언트 애플리케이션의 지형지물에 속성을 추가로 조인할 수 있습니다. 예를 보려면 데이터 기반 스타일 지정을 사용하여 실시간으로 데이터 보기 [https://developers.google.com/maps/architecture/dds-real-time?hl=ko]를 참고하세요.
가능하면 정수와 같은 단순한 데이터 유형을 속성 객체에 사용하여 카드 크기를 최소화하고 지도 성능을 개선합니다.
파일을 업로드하기 전에 복잡한 도형을 단순화하세요. 오픈소스 Mapshaper.org [https://mapshaper.org/] 유틸리티와 같은 원하는 지리공간 도구에서 또는 복잡한 다각형 도형에 ST_Simplify [https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions?hl=ko#st_simplify]를 사용하여 BigQuery에서 이 작업을 수행할 수 있습니다.
파일을 업로드하기 전에 매우 밀집된 포인트를 클러스터링합니다. 오픈소스 turf.js 클러스터 함수 [https://turfjs.org/docs/#clustersDbscan]와 같은 원하는 지리정보 도구에서 또는 BigQuery에서 빽빽한 포인트 도형에 ST_CLUSTERDBSCAN [https://cloud.google.com/bigquery/docs/reference/standard-sql/geography_functions?hl=ko#st_clusterdbscan]을 사용하여 이를 실행할 수 있습니다.
데이터 세트 및 BigQuery로 데이터 시각화 [https://developers.google.com/maps/architecture/bigquery-datasets-visualization?hl=ko#design_considerations]에서 데이터 세트 권장사항에 관한 추가 안내를 확인하세요.
GeoJSON 요구사항
Maps JavaScript API는 최신 GeoJSON 사양 [https://datatracker.ietf.org/doc/html/rfc7946]을 지원합니다. Maps JavaScript API는 다음 객체 유형이 포함된 GeoJSON 파일도 지원합니다.
도형 객체. 도형 객체는 점, 선, 다각형(구멍이 있을 수 있음)으로 설명된 공간 도형입니다.
지형지물 객체. 지형지물 객체에는 도형과 추가 이름/값 쌍이 포함되어 있으며, 그 의미는 애플리케이션별로 다릅니다.
지형지물 컬렉션. 지형지물 컬렉션은 지형지물 객체의 집합입니다.
Maps JavaScript API는 좌표 참조 시스템(CRS)에 WGS84 [https://epsg.io/4326] 이외의 데이터가 있는 GeoJSON 파일을 지원하지 않습니다.
GeoJSON에 대한 자세한 내용은 RFC 7946 준수 [https://www.rfc-editor.org/rfc/rfc7946]를 참고하세요.
KML 요구사항
Maps JavaScript API는 다음과 같은 요구사항이 있습니다.
모든 URL은 파일 자체에 대한 로컬 URL 또는 상대 URL이어야 합니다.
점, 선, 다각형 도형이 지원됩니다.
모든 데이터 속성은 문자열로 간주됩니다.
다음과 같은 KML 지형지물은 지원되지 않습니다.
파일 외부에 정의된 아이콘 또는 <styleUrl>
네트워크 링크(예: <NetworkLink>)
지면 오버레이(예: <GroundOverlay>)
3D 도형 또는 고도 관련 태그(예: <altitudeMode>)
카메라 동작 지정(예: <LookAt>)
KML 파일 내에서 정의된 스타일
CSV 요구사항
CSV 파일의 경우 지원되는 열 이름이 우선순위에 따라 아래에 나열되어 있습니다.
latitude, longitude
lat, long
x, y
wkt(Well-Known Text) [https://en.wikipedia.org/wiki/Well-known_text_representation_of_geometry]
address, city, state, zip
address
모든 주소 정보가 포함된 단일 열(예: 1600 Amphitheatre Parkway Mountain View, CA 94043)
예를 들어 파일에 x, y, wkt라는 열이 포함되어 있는 경우, 위 목록에 표시된 지원되는 열 이름의 순서에 따라 x 및 y의 우선순위가 더 높기 때문에 x 및 y 열의 값이 사용되고 wkt 열은 무시됩니다.
다음 사항도 적용됩니다.
하나의 열 이름은 하나의 열에 속해야 합니다. 즉, x와 y 좌표 데이터를 모두 포함하는 xy라는 열은 있을 수 없습니다. x 좌표와 y 좌표는 각각 별도의 열에 있어야 합니다.
열 이름은 대소문자를 구분하지 않습니다.
열 이름의 순서는 중요하지 않습니다. 예를 들어 CSV 파일에 lat 열과 long 열이 포함되어 있으면 어떤 순서로든 발생할 수 있습니다.
데이터 업로드 오류 처리
데이터 세트에 데이터를 업로드할 때 이 섹션에서 설명하는 일반적인 오류 중 하나가 발생할 수 있습니다.
GeoJSON 오류
일반적인 GeoJSON 오류는 다음과 같습니다.
type 필드가 누락되었거나 type이 문자열이 아닙니다. 업로드된 GeoJSON 데이터 파일에는 각 지형지물 객체 및 도형 객체 정의의 일부로 type이라는 문자열 필드가 포함되어야 합니다.
KML 오류
일반적인 KML 오류는 다음과 같습니다.
위에서 언급한 지원되지 않는 KML 기능이 데이터 파일에 포함되어서는 안 됩니다. 그렇지 않으면 데이터 가져오기에 실패할 수 있습니다.
CSV 오류
일반적인 CSV 오류는 다음과 같습니다.
일부 행에 도형 열의 값이 없습니다. CSV 파일의 모든 행에는 도형 열을 위한 비어 있지 않은 값이 있어야 합니다. 도형 열에는 다음이 포함됩니다.
latitude, longitude
lat, long
x, y
wkt
address, city, state, zip
address
모든 주소 정보가 포함된 단일 열(예: 1600 Amphitheatre Parkway Mountain View, CA 94043)
참고: 이 오류는 주로 "' ' 값을 double로 변환할 수 없습니다." 또는 "입력값을 지역으로 파싱할 수 없습니다. 지역 값이 누락되었습니다." 같은 형식의 메시지로 나타납니다.
x 및 y가 도형 열인 경우 단위가 경도 및 위도인지 확인합니다. 일부 공개 데이터 세트는 x 및 y 헤더 아래에 다른 좌표계를 사용합니다. 잘못된 단위를 사용해도 데이터 세트를 성공적으로 가져올 수 있지만 렌더링된 데이터에서 데이터 세트 포인트가 예기치 않은 위치에 표시될 수 있습니다.
데이터 세트 만들기
데이터 세트를 만들려면 다음 안내를 따르세요.
Google Cloud 콘솔에서 데이터 세트 페이지로 이동 [https://console.cloud.google.com/google/maps-apis/datasets?hl=ko]합니다.
데이터 세트 만들기를 클릭합니다.
데이터 세트 이름을 입력합니다. 이름은 모든 데이터 세트에서 고유해야 합니다.
원하는 경우 데이터 세트 설명을 입력합니다.
계속을 클릭합니다. 데이터 가져오기 페이지가 나타납니다.
데이터 세트를 채우는 데 사용되는 데이터의 업로드 소스로 데스크톱(즉, 시스템의 로컬 파일) 또는 Google Cloud Storage 버킷을 선택합니다.
데스크톱에서 찾아보기를 클릭하고 파일 선택기에서 파일을 선택합니다.
Google Cloud Storage 버킷에서 찾아보기를 클릭하고 데이터가 포함된 버킷과 파일을 선택합니다.
파일 형식을 선택합니다.
계속을 클릭하여 설정을 검토합니다.
만들기를 클릭합니다. 새 데이터 세트를 보여주는 데이터 세트 페이지가 나타납니다. 상태는 처리 중입니다.
데이터가 업로드되면 다음 단계를 따르세요.
데이터 세트의 상태가 완료됨으로 설정됩니다.
데이터 세트가 '활성' 버전이 되며 앱에서 사용하는 버전입니다.
업로드에 오류가 있는 경우:
새 데이터 세트 버전의 상태가 완료됨이 아닌 상태로 설정됩니다.
데이터 세트 보기 또는 수정
데이터 세트를 만든 후에는 다음과 같이 데이터 세트를 확인하거나 수정할 수 있습니다.
Google Cloud 콘솔에서 데이터 세트 페이지로 이동 [https://console.cloud.google.com/google/maps-apis/datasets?hl=ko]합니다.
데이터 세트의 이름을 클릭합니다. 데이터 세트 세부정보 페이지가 나타납니다.
세부정보 탭을 클릭하면 데이터 세트에 관한 정보를 확인할 수 있습니다. 이 탭에서 데이터 세트 이름 및 설명을 수정할 수도 있습니다.
미리보기 탭을 클릭하여 지도에서 데이터 세트를 확인합니다 (완료됨 또는 되돌림됨 상태의 데이터 세트만 해당).
테이블 데이터 탭을 클릭하여 데이터 세트의 모든 속성을 확인합니다 (완료됨 또는 되돌림됨 상태의 데이터 세트만 해당). 지도에서 데이터 세트의 스타일을 지정하는 데 사용할 수 있는 속성입니다.
다운로드 버튼을 클릭하면 데이터를 로컬 파일로 다운로드할 수 있습니다.
삭제 버튼을 클릭하면 데이터 세트를 삭제할 수 있습니다.
데이터 파일 가져오기 버튼을 클릭하여 새 데이터를 데이터 세트에 업로드합니다.
데이터 세트에 새 데이터를 업로드하면 새 버전의 데이터 세트가 생성됩니다. 새 데이터가 업로드되면 다음 단계를 따르세요.
새 버전의 데이터 세트 상태가 완료됨으로 설정됩니다.
새 버전이 '활성' 버전이 되며 앱에서 사용하는 버전입니다.
업로드에 오류가 있는 경우:
새 데이터 세트 버전의 상태가 완료됨이 아닌 상태로 설정됩니다. 예를 들어 이전의 '활성' 버전이 있는 경우 데이터 세트의 상태가 REVERTED로 설정됩니다.
이전에 '활성'이었던 데이터 세트 버전은 '활성' 버전으로 유지되며 앱에서 사용하는 버전입니다.
의견 보내기