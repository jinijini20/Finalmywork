Source URL: https://developers.google.com/maps/documentation/maps-static/digital-signature?hl=ko

이 페이지는 Cloud Translation API를 통해 번역되었습니다.
홈
제품
Google Maps Platform
문서
Web
Maps Static API
의견 보내기
디지털 서명 사용하기
Maps Static API 디지털 서명에는 만료일이 없습니다.
API 키로 요청에 디지털 서명
사용량에 따라 요청을 인증하는 데 API 키 외에 디지털 서명이 필요할 수 있습니다. 다음 도움말을 참고하세요.
Maps Static API 기타 사용량 한도
디지털 서명 작동 방식
디지털 서명은 Google Cloud 콘솔에서 제공되는 URL 서명 비밀번호를 사용하여 생성됩니다. 이 비밀번호는 기본적으로 사용자와 Google 사이에만 공유되는 비공개 키이며 프로젝트별로 고유합니다.
서명 과정에서는 암호화 알고리즘을 사용하여 URL과 공유 비밀번호를 결합합니다. 결과로 얻은 고유 서명을 사용하면 서버에서 API 키를 사용하여 요청을 생성하는 사이트에 그러한 권한이 있는지 확인할 수 있습니다.
사용량에 관계없이 API 키와 디지털 서명을 모두 사용하는 것이 좋습니다.
서명되지 않은 요청 제한
API 키가 서명된 요청만 수락하도록 하기 위한 방법은 다음과 같습니다.
Cloud 콘솔에서 Google Maps Platform 할당량 페이지로 이동합니다.
프로젝트 드롭다운을 클릭하고 애플리케이션 또는 사이트에 대한 API 키를 만들 때 사용한 것과 동일한 프로젝트를 선택합니다.
API 드롭다운에서 Maps Static API를 선택합니다.
서명되지 않은 요청 섹션을 펼칩니다.
할당량 이름 표에서 수정할 할당량 옆에 있는 수정 버튼을 클릭합니다. 예를 들면, 하루에 서명되지 않은 요청 수입니다.
할당량 한도 수정 창에서 할당량 한도를 업데이트합니다.
저장을 선택합니다.
시작하기 전에
시작하기 전에 정적 지도의 웹페이지 URL을 알아냅니다. 이 URL에 디지털 서명을 합니다.
요청 서명
요청에 서명하는 단계는 다음과 같습니다.
1단계: URL 서명 비밀번호 가져오기
2단계: 서명되지 않은 요청 구성
3단계: 서명된 요청 생성
1단계: URL 서명 비밀번호 가져오기
주의: URL 서명 비밀번호를 안전하게 보관하세요. 어떤 요청에도 전달해서는 안 되며, 웹사이트에 저장하거나 공개 포럼에 게시해서도 안 됩니다. 이 URL 서명 비밀번호를 입수한 사람이 내 신원을 사용하여 요청을 스푸핑할 수도 있습니다.
프로젝트 URL 서명 비밀번호를 가져오는 방법은 다음과 같습니다.
Cloud 콘솔에서 Google Maps Platform 사용자 인증 정보 페이지로 이동합니다.
프로젝트 드롭다운을 선택하고 Maps Static API의 API 키를 만들 때 사용한 것과 동일한 프로젝트를 선택합니다.
비밀번호 생성기 카드까지 아래로 스크롤합니다. 현재 비밀번호 입력란에 현재 URL 서명 비밀번호가 표시되어 있습니다.
이 페이지에는 현재 서명 비밀번호를 사용하여 Maps Static API 요청에 자동으로 서명할 수 있는 지금 URL 서명하기 위젯도 있습니다. 지금 URL 서명하기 카드까지 아래로 스크롤하여 액세스합니다.
새 URL 서명 비밀번호를 가져오려면 비밀번호 재생성을 선택합니다. 이전의 비밀번호는 새 비밀번호를 생성한 후 24시간이 지나면 만료됩니다. 24시간이 지나면 이전 비밀번호를 포함한 요청은 더 이상 효력이 없게 됩니다.
2단계: 서명되지 않은 요청 구성
주의: 클라이언트 ID와 API 키가 모두 포함된 요청은 예기치 않은 API 동작이나 의도하지 않은 결제 동작을 초래할 수 있습니다. 이를 방지하려면 요청에서 두 매개변수 중 하나만 사용해야 합니다.
중요: 모든 Google 서비스에는 ASCII가 암시적으로 포함된 UTF-8 문자 인코딩이 필요합니다. 애플리케이션이 비 ASCII 문자 집합을 사용하여 실행되는 경우 UTF-8을 사용하여 URL을 구성하고 적절하게 URL 인코딩을 해야 합니다.
아래 표에 나열되지 않은 문자는 URL로 인코딩해야 합니다.
세트 문자 URL 사용
영숫자 a b c d e f g h i j k l m n o p q r s t u v w x y z A B C D E F G H I J K L M N O P Q R S T U V W X Y Z 0 1 2 3 4 5 6 7 8 9 텍스트 문자열, 스킴 사용(http), 포트(8080) 등
예약되지 않음 - _ . ~ 텍스트 문자열
예약됨 ! * ' ( ) ; : @ & = + $ , / ? % # [ ] 제어 문자 또는 텍스트 문자열
예약됨 세트에 있는 문자가 텍스트 문자열 내에 전달되는 경우에도 마찬가지입니다. 자세한 내용은 특수문자를 참고하세요.
서명되지 않은 요청 URL을 서명 없이 구성합니다. 자세한 내용은 다음 개발자 문서를 참고하세요.
Maps Static API
API 키를 key 매개변수에도 포함해야 합니다. 예를 들면 다음과 같습니다.
https://maps.googleapis.com/maps/api/staticmap?center=Z%C3%BCrich&zoom=12&size=400x400&key=YOUR_API_KEY
서명된 요청 생성
웹페이지에 간단한 Maps Static API 또는 Street View Static API 이미지를 호스팅하거나 문제 해결을 목적으로 하는 일회성 사용 사례의 경우 사용 가능한 지금 URL 서명하기 위젯을 사용하여 디지털 서명을 자동으로 생성할 수 있습니다.
동적으로 생성된 요청의 경우 서버 측 서명이 필요한데 이를 위해서는 중간 단계를 더 거쳐야 합니다.
어떤 방법을 사용하든 끝에 signature 매개변수가 추가된 요청 URL이 생성됩니다. 예를 들면 다음과 같습니다.
https://maps.googleapis.com/maps/api/staticmap?center=Z%C3%BCrich&zoom=12&size=400x400&key=YOUR_API_KEY
&signature=BASE64_SIGNATURE
지금 URL 서명 위젯 사용
Google Cloud 콘솔의 지금 URL 서명하기 위젯을 사용하여 API 키로 디지털 서명을 생성하려면 다음 단계를 따르세요.
1단계: URL 서명 비밀번호 가져오기에 설명된 대로 지금 URL 서명하기 위젯을 찾습니다.
URL 입력란에 2단계: 서명되지 않은 요청 구성의 서명되지 않은 요청 URL을 붙여넣습니다.
서명한 URL 입력란이 나타나고 디지털 서명된 URL이 표시됩니다. 반드시 사본을 만드세요.
서버 측 디지털 서명 생성
지금 URL 서명하기 위젯과 달리 서버 측에서 디지털 서명을 생성할 때는 추가 작업이 필요합니다.
URL에서 프로토콜 스킴과 호스트 부분을 삭제하고 경로와 쿼리만 남겨둡니다.
/maps/api/staticmap?center=Z%C3%BCrich&zoom=12&size=400x400&key=YOUR_API_KEY
표시된 URL 서명 비밀번호는 URL의 수정된 Base64로 인코딩됩니다.
대부분의 암호화 라이브러리는 키가 원시 바이트 형식이어야 하므로, 서명하기 전에 URL 서명 비밀번호를 기존 원시 형식으로 디코딩해야 할 수 있습니다.
HMAC-SHA1을 사용하여 위의 삭제된 요청에 서명합니다.
대부분의 암호화 라이브러리는 원시 바이트 형식의 서명을 생성하므로, 결과로 얻은 바이너리 서명을 URL 내에서 전달할 수 있는 형식으로 변환하려면 URL의 수정된 Base64를 사용하여 변환해야 합니다.
참고: URL의 수정된 Base64는 표준 Base64의 + 및 / 문자를 각각 - 및 _ 문자로 대체하므로, 이러한 Base64를 더 이상 URL로 인코딩할 필요가 없습니다.
Base64로 인코딩된 서명을 signature 매개변수의 서명되지 않은 기존 요청 URL에 추가합니다. 예를 들면 다음과 같습니다.
https://maps.googleapis.com/maps/api/staticmap?center=Z%C3%BCrich&zoom=12&size=400x400&key=YOUR_API_KEY
&signature=BASE64_SIGNATURE
서버 측 코드를 사용하여 URL 서명을 구현하는 방법은 아래의 URL 서명 샘플 코드를 참고하세요.
URL 서명 샘플 코드
다음 섹션에서는 서버 측 코드를 사용하여 URL 서명을 구현하는 방법을 보여줍니다. URL 서명 비밀번호가 사용자에게 노출되지 않도록 하려면 항상 서버 측에서 URL에 서명해야 합니다.
다른 언어로 구현된 예시
다른 언어가 포함된 예는 url-signing 프로젝트를 참고하세요.
문제 해결
중요: 사용된 URL 서명 비밀번호와 API 키가 동일한 Google Cloud 프로젝트의 것인지 확인합니다.
요청에 잘못된 서명이 포함된 경우 API에서 HTTP 403 (Forbidden) 오류를 반환합니다. 이 오류는 사용된 서명 보안이 전달된 API 키에 연결되지 않았거나 서명하기 전에 ASCII가 아닌 입력이 URL로 인코딩되지 않은 경우에 발생할 가능성이 높습니다.
문제를 해결하려면 요청 URL을 복사한 후 signature 쿼리 매개변수를 제거한 다음 아래 안내에 따라 유효한 서명을 다시 생성합니다.
Google Cloud 콘솔의 지금 URL 서명하기 위젯을 사용하여 API 키로 디지털 서명을 생성하려면 다음 단계를 따르세요.
1단계: URL 서명 비밀번호 가져오기에 설명된 대로 지금 URL 서명하기 위젯을 찾습니다.
URL 입력란에 2단계: 서명되지 않은 요청 구성의 서명되지 않은 요청 URL을 붙여넣습니다.
서명한 URL 입력란이 나타나고 디지털 서명된 URL이 표시됩니다. 반드시 사본을 만드세요.
의견 보내기