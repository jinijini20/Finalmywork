Source URL: https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko

이 페이지는 Cloud Translation API [https://cloud.google.com/translate/?hl=ko]를 통해 번역되었습니다.
Switch to English
홈 [https://developers.google.com/?hl=ko]
제품 [https://developers.google.com/products?hl=ko]
Google Maps Platform [https://developers.google.com/maps?hl=ko]
문서 [https://developers.google.com/maps/documentation?hl=ko]
Android [https://developers.google.com/maps/android?hl=ko]
Navigation SDK for Android [https://developers.google.com/maps/documentation/navigation/android-sdk?hl=ko]
도움이 되었나요?
의견 보내기
Android Auto 내비게이션 사용 설정
bookmark_border
이 페이지의 내용
설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#set_up]
Android Auto로 시작하기 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#start_with_android_auto]
Navigation SDK 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#set_up_the_nav_sdk]
지도 및 탐색 UI 그리기 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#draw_the_map_and_navigation_ui]
지도 상호작용 사용 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#enable_map_interaction]
내비게이션 경로 표시 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#display_navigation_directions]
관찰자 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#set_up_an_observer]
탐색 정보 입력 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#populate_navigation_information]
이 제품 또는 기능은 미리보기(GA 이전) 버전입니다. GA 이전 제품과 기능은 지원이 제한적일 수 있으며, GA 이전 제품과 기능에 대한 변경사항은 다른 GA 이전 버전과 호환되지 않을 수 있습니다. GA 이전 버전 제품 및 서비스에는 Google Maps Platform 서비스별 약관 [https://cloud.google.com/maps-platform/terms/maps-service-terms?hl=ko]이 적용됩니다. 자세한 내용은 출시 단계 설명 [https://developers.google.com/maps/launch-stages?hl=ko]을 참고하세요.
중요: Android Auto와 함께 사용하도록 개발된 모든 앱은 승인된 안전 절차를 따라야 합니다. 이 가이드에서는 따라야 하는 표준 사례를 제공하지만 Android Auto용 앱을 출시하려면 여전히 승인을 위해 앱을 제출해야 합니다. 자세한 내용은 자동차용 Android Auto 앱 배포 [https://developer.android.com/training/cars/distribute?hl=ko]를 참고하세요.
이 섹션에서는 자동차용 Android 앱 라이브러리와 함께 Navigation SDK를 사용하여 대시보드 내 헤드 단위 [https://en.wikipedia.org/wiki/Automotive_head_unit]에 앱의 탐색 환경을 표시하는 방법을 설명합니다. 사용자의 대시보드 시스템이 Android Auto를 지원하는 경우 사용자는 휴대전화를 기기에 연결하여 자동차 디스플레이에서 직접 앱을 사용할 수 있습니다. 음성 안내는 자동차 스피커에서도 실행됩니다.
자동차용 Android 앱 라이브러리 [https://developer.android.com/training/cars/apps?hl=ko]를 사용하면 운전자 안전을 위해 승인된 시각적 템플릿 세트를 제공하여 Android 애플리케이션을 Android Auto에서 실행할 수 있습니다. 이러한 템플릿은 운전자의 주의 분산을 줄이기 위해 대시보드 내 UI 컨트롤을 휴대전화의 컨트롤로 제한합니다.
Navigation SDK 기반 앱이 Android Auto와 호환되도록 설정하면 내비게이션 환경을 위한 추가 뷰가 제공됩니다. 이렇게 하면 휴대전화용 지도 보기와 헤드 단위용 지도 보기 등 두 개의 지도 보기가 가능합니다. 두 디스플레이 모두 싱글톤인 Navigator.java의 안내를 받습니다.
대시보드 내 시스템은 안전 승인을 받은 대화형 요소를 표시하여 사용자가 과도한 방해 없이 목적지로 안전하게 이동할 수 있습니다. 사용자는 주문 수락 또는 거부, 지도에서 고객 위치 보기와 같은 앱별 기능과 상호작용할 수도 있습니다. 주문 상태 업데이트는 대시보드 내 단위에도 표시될 수 있습니다.
연결된 휴대전화는 표준 Navigation SDK 환경 또는 애플리케이션의 다른 뷰나 워크플로를 계속 표시할 수 있습니다. 이 기능을 사용하면 차량 화면에서 제대로 작동하지 않을 수 있는 맞춤 기능을 계속 제공할 수 있습니다.
설정
앱이 Android Auto와 호환되도록 하려면 먼저 Android Auto로 자동차 서비스를 설정한 다음 Navigation SDK 앱에서 TurnByTurn 라이브러리를 사용 설정해야 합니다.
Android Auto로 시작하기
Android Auto와 함께 작동하도록 설계된 Navigation SDK 기능을 사용하기 전에 Android Auto가 앱을 검색할 수 있도록 앱의 자동차 서비스를 설정해야 합니다.
다음 단계를 따르세요. 이 단계는 모두 Android for Cars [https://developer.android.com/training/cars?hl=ko] 개발자 문서에서 확인할 수 있습니다.
기본 Android Auto 기능을 숙지 [https://developer.android.com/training/cars?hl=ko]합니다.
자동차용 Android 앱 라이브러리를 설치 [https://developer.android.com/training/cars/apps?hl=ko#install-library]합니다.
Android Auto를 포함하도록 앱의 매니페스트 파일을 구성 [https://developer.android.com/training/cars/apps?hl=ko#configure-manifest-files]합니다.
매니페스트에서 최소 자동차 앱 수준을 1로 선언 [https://developer.android.com/training/cars/apps?hl=ko#api-level]합니다.
CarAppService 및 세션을 만듭니다 [https://developer.android.com/training/cars/apps?hl=ko#create-carappservice].
Navigation SDK 설정
자동차 앱 서비스를 설정하면 Navigation SDK를 사용할 수 있습니다.
아직 Navigation SDK를 앱에 통합하지 않은 경우 프로젝트를 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/set-up-project?hl=ko]합니다.
앱에 대해 턴바이턴 안내 피드를 사용 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/tbt-feed?hl=ko]합니다.
선택사항입니다. Navigation SDK에서 생성된 아이콘을 사용 [https://developers.google.com/maps/documentation/navigation/android-sdk/tbt-feed-display?hl=ko#use_generated_icons]합니다.
Screen 클래스에 제공된 Android Auto Surface에서 NavigationViewForAuto 클래스를 사용하여 지도를 그립니다 [https://developer.android.com/training/cars/apps/navigation?hl=ko#drawing-the-map].
TurnbyTurn 라이브러리의 데이터로 Android Auto 탐색 템플릿을 채웁니다 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?section=surface-callbacks&hl=ko#populate_navigation_information].
이제 앱에 탐색 정보를 제공하는 등록된 서비스가 있고 앱이 Android Auto에 연결할 수 있으므로 앱이 Android Auto와 제대로 작동하는 데 필요한 나머지 탐색 요소를 만들 준비가 되었습니다.
지도 및 탐색 UI 그리기 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?section=surface-callbacks&hl=ko#draw_the_map_and_navigation_ui]
지도 상호작용 사용 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?section=surface-callbacks&hl=ko#enable_map_interaction]
이동 경로 표시 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?section=surface-callbacks&hl=ko#display_navigation_directions]
올바른 조작 유형 확인 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?section=surface-callbacks&hl=ko#ensure_correct_maneuver_types]
지도 및 탐색 UI 그리기
NavigationViewForAuto 클래스는 Android Auto 화면에 지도와 탐색 UI를 렌더링합니다. 휴대전화용 NavigationView과 거의 동일한 기능을 제공하지만 상호작용은 제한적입니다. NavigationViewForAuto를 사용하여 Android Auto에서 제공하는 Surface [https://developer.android.com/reference/android/view/Surface?hl=ko]에 그립니다.
private boolean isSurfaceReady(SurfaceContainer surfaceContainer) {
  return surfaceContainer.getSurface() != null
        && surfaceContainer.getDpi() != 0
        && surfaceContainer.getHeight() != 0
        && surfaceContainer.getWidth() != 0;
}

@Override
public void onSurfaceAvailable(@NonNull SurfaceContainer surfaceContainer) {
  if (!isSurfaceReady(surfaceContainer)) {
    return;
   }
  virtualDisplay =
      getCarContext()
          .getSystemService(DisplayManager.class)
          .createVirtualDisplay(
            VIRTUAL_DISPLAY_NAME,
            surfaceContainer.getWidth(),
            surfaceContainer.getHeight(),
            surfaceContainer.getDpi(),
            surfaceContainer.getSurface(),
            DisplayManager.VIRTUAL_DISPLAY_FLAG_OWN_CONTENT_ONLY);
    presentation = new Presentation(getCarContext(), virtualDisplay.getDisplay());

    navigationView = new NavigationViewForAuto(getCarContext());
    navigationView.onCreate(null);
    navigationView.onStart();
    navigationView.onResume();

    presentation.setContentView(navigationView);
    presentation.show();

    navigationView.getMapAsync(googleMap -> this.googleMap = googleMap);
  }

@Override
public void onSurfaceDestroyed(@NonNull SurfaceContainer surfaceContainer) {
  navigationView.onPause();
  navigationView.onStop();
  navigationView.onDestroy();

  presentation.dismiss();
  virtualDisplay.release();
}
지도 상호작용 사용 설정
운전자 안전을 위해 Android Auto는 화면 노출 영역 상호작용을 일련의 SurfaceCallback [https://developer.android.com/training/cars/apps/navigation?hl=ko#surface-callback] 메서드로 제한합니다. 이러한 콜백을 사용하여 대시보드 화면에서 제한된 운전자와 지도의 상호작용을 지원합니다. 예를 들어 onClick 및 onScale은 사용자의 탭 및 핀치 동작에 해당합니다. 상호작용 콜백은 다음과 같이 지도 작업 스트립 [https://developer.android.com/training/cars/apps/navigation?hl=ko#map-action-strip]을 사용해야 합니다.
지도 상호작용 콜백을 수신하려면 앱에서 Action.PAN 버튼을 사용해야 합니다.
추가 사용자 작업을 지원하려면 지도 작업 스트립에 버튼을 추가하세요.
--- 탭: 서페이스 콜백 사용 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#%EC%84%9C%ED%8E%98%EC%9D%B4%EC%8A%A4-%EC%BD%9C%EB%B0%B1-%EC%82%AC%EC%9A%A9-%EC%84%A4%EC%A0%95] ---
@NonNull
@Override
public Template onGetTemplate() {
  return new NavigationTemplate.Builder()
    .setActionStrip(new ActionStrip.Builder().build())
    .setMapActionStrip(new ActionStrip.Builder().addAction(Action.PAN).build())
    .build();
}

--- 탭: 손가락을 모아 확대/축소 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#%EC%86%90%EA%B0%80%EB%9D%BD%EC%9D%84-%EB%AA%A8%EC%95%84-%ED%99%95%EB%8C%80%EC%B6%95%EC%86%8C] ---
@Override
public void onScale(float focusX, float focusY, float scaleFactor) {
  CameraUpdate update =
      CameraUpdateFactory.zoomBy((scaleFactor - 1),
                                  new Point((int) focusX, (int) focusY));
  googleMap.animateCamera(update); // map is set in onSurfaceAvailable.
}

--- 탭: 화면 이동 [https://developers.google.com/maps/documentation/navigation/android-sdk/android-auto?hl=ko#%ED%99%94%EB%A9%B4-%EC%9D%B4%EB%8F%99] ---
@Override
public void onScroll(float distanceX, float distanceY) {
  googleMap.moveCamera(CameraUpdateFactory.scrollBy(distanceX, distanceY));
}
내비게이션 경로 표시
이 섹션에서는 탐색 게시물의 관찰자를 설정하고 회전 카드 템플릿에 탐색 방향을 채우는 방법을 다룹니다.
Android Auto 탐색 템플릿 [https://developer.android.com/reference/androidx/car/app/navigation/model/NavigationTemplate?hl=ko]은 현재 여정과 관련된 탐색 정보를 표시하는 회전 카드를 제공합니다. Navigation SDK의 TurnByTurn 라이브러리는 이 탐색 정보를 제공하며, 코드는 이 정보를 사용하여 Android Auto 탐색 템플릿을 채웁니다.
참고: 계속하기 전에 턴바이턴 안내 피드 사용 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/tbt-feed?hl=ko] 가이드의 단계를 따랐고 내비게이션 정보를 제공하는 서비스가 등록되어 있는지 확인하세요.
관찰자 설정
다음 예에서 SampleApplication은 MutableLiveData<NavInfo> 객체를 유지하는 맞춤 애플리케이션 클래스입니다. 관찰자가 탐색기 객체로부터 업데이트를 수신하면 이 NavInfo 객체를 SampleApplication 클래스에서 유지관리하는 NavInfoMutableLiveData에 게시합니다.
다음 예에서는 Android Auto 화면 [https://developer.android.com/reference/androidx/car/app/Screen?hl=ko] 구현에서 이 객체의 관찰자를 등록합니다.
public SampleAndroidAutoNavigationScreen(@NonNull CarContext carContext,
                                     SampleApplication application) {
  super(carContext);
  getCarContext().getCarService(AppManager.class).setSurfaceCallback(this);
  application.getNavInfoMutableLiveData().observe(this, this::processNextStep);
}
탐색 정보 입력
다음 코드 스니펫은 단계, 거리, 아이콘을 비롯한 현재 라우팅 정보로 Android Auto 템플릿을 채우는 방법을 보여줍니다. 이러한 디스플레이 요소에 관한 자세한 내용은 피드 디스플레이 채우기 [https://developers.google.com/maps/documentation/navigation/android-sdk/tbt-feed-display?hl=ko]를 참고하세요.
펼쳐서 코드 예시를 확인하세요.
올바른 기동 유형 확인
Android Auto 자동차 라이브러리에서 사용되는 종류의 조작은 TurnByTurn 라이브러리에서 제공하는 조작과 일대일로 대응됩니다. 하지만 Navigation SDK 동작을 Android Auto 자동차 라이브러리의 유효한 선언으로 변환해야 합니다. 다음 표에는 몇 가지 필드의 대응 관계가 나와 있으며, 그 아래에는 편의를 위해 샘플 변환기 유틸리티가 나와 있습니다.
세부 경로 안내 라이브러리 조작 Android Auto Maneuver
DEPART TYPE_DEPART
DESTINATION TYPE_DESTINATION
DESTINATION_LEFT TYPE_DESTINATION_LEFT
DESTINATION_RIGHT TYPE_DESTINATION_RIGHT
TURN_U_TURN_CLOCKWISE TYPE_U_TURN_RIGHT
ON_RAMP_LEFT TYPE_ON_RAMP_NORMAL_LEFT
ON_RAMP_RIGHT TYPE_ON_RAMP_NORMAL_RIGHT
ON_RAMP_SLIGHT_LEFT TYPE_ON_RAMP_SLIGHT_LEFT
FORK_RIGHT TYPE_FORK_RIGHT
펼쳐서 코드 예시를 확인하세요.
관련 문서
세부 경로 안내 피드 사용 설정 [https://developers.google.com/maps/documentation/navigation/android-sdk/tbt-feed?hl=ko]: 앱이 Android Auto와 호환되도록 먼저 세부 경로 안내 기능을 통합합니다.
피드 표시 채우기 [https://developers.google.com/maps/documentation/navigation/android-sdk/tbt-feed-display?hl=ko]: 안내 정보의 데이터 필드에 액세스하고 아이콘을 사용합니다.
도움이 되었나요?
의견 보내기